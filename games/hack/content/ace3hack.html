<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<style media="all">
         @import url(/site/contentframe.css);
      </style>
   </head>
   <body>
      <p>
	<i>Обновлено 25.06.2015.</i>
	<br><br>
       	Пока что во взломе мало результатов.
	<br>
	Я написал <a href="https://dl.dropboxusercontent.com/u/34707934/Games/etc/s3translation/electrosphere/ACE_Unpacker-EXP.py" target="_top">распаковщик</a>
	 для BPB файлов, его нужно положить в одну папку с ACE.BPB и ACE.BPH.
	<br><br>
	Таблица адресации находится в BPH файле, начинается с 20(dec) и дальше по 8 байт на субфайл:
	<br>
	[4 байта - неизвестно][4 байта - смещение файла]
	<br>
	Субфайлы идут один за другим. Смещения измеряются интересным образом, в секторах (2048 байт = 1 сектор).
	<br><br>
	Более-менее точно известно только назначение субфайлов со 103 по 111.
	<br>
	В них содержится текст для крупных видеороликов, в картинке TIM формата.
	<br>
	Список сопоставления есть на <a href="http://nihonjinryuu.narod.ru/acecombat3/Hack.html" target="_top">сайте</a> nihonjin, порядок - тот же.
	<br>
	Первые 16 байт - всегда 01000000080000000100000008000000(hex), дальше идёт сам TIM файл.
	<br><br>
	Заменить их можно с помощью <a href="http://www.zophar.net/utilities/psxutil/tim-viewer.html" target="_top">TimViewer</a>
	 и <a href="http://klimaleksus.narod2.ru/Files/1/ripbin.rar" target="_top">RipBIN</a>
 	(с настройками как для WAD - 24/2048/280), но не сразу.
	<br>
	Нужно работать с целым BPB файлом, распаковщик пока что чисто для исследовательских целей.
	<br>
	После конвертации нового текста в TIM c помощью TimViewer нужно исправить полученный файл.
	<br>
	Вот <a href="https://dl.dropboxusercontent.com/u/34707934/Games/etc/s3translation/electrosphere/ace_patch.py" target="_top">скрипт</a>
	. После запуска скрипта нужно перетащить в окно оригинальный файл с текстом, нажать Enter,
	<br>
	перетащить новый файл, нажать Enter, и вставлять вместо старого текста файл output.tim,
	<br>
	появившиийся в папке со скриптом.
	<br><br>
	Скрипт копирует какие-то дополнительные данные, 4 байта по смещению 12(dec).
	<br><br>
	После этого вставленный файл принимается игрой.
	<br><br>
	Судя по всему, текст брифингов хранится точно так же - один графический файл с текстом.
	<br>
	Никаких следов японского шрифта в архивах игры не обнаружено.
	<br>
	Весьма вероятно, файлы с текстом брифингов - 4-х битные...
	<br><br>
	Нашёл один проект по переводу:
	<br>
	<a href="http://www.romhacking.net/forum/index.php/topic,17658.0.html" target="_top">RomHacking.net Forum</a>
	<br>
	Данные оттуда подтверждают мои догадки.
	<br>
	Плюс, оказывается, большая часть картинок с тектом не находится потому, что они... находятся в сжатых архивах.
	<br>
      </p>
   
</body></html>